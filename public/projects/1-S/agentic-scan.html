<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenDevin UI - Misinformation Agent</title>
    
    <!-- Fonts: JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { mono: ['"JetBrains Mono"', 'monospace'] },
                    colors: {
                        bg: '#0f0f0f',       /* Main IDE Background */
                        panel: '#171717',    /* Secondary Panel BG */
                        border: '#2a2a2a',   /* Subtle Borders */
                        active: '#262626',   /* Active Item BG */
                        text: '#a3a3a3',     /* Muted Text */
                        highlight: '#ededed',/* Bright Text */
                        accent: '#3b82f6',   /* Blue Accent */
                        destructive: '#ef4444',
                        success: '#22c55e',
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        /* Base Reset */
        body { background-color: #000; color: #a3a3a3; font-family: 'JetBrains Mono', monospace; overflow: hidden; font-size: 13px; }
        
        /* Custom Scrollbar to match IDE look */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #0f0f0f; border-left: 1px solid #2a2a2a; }
        ::-webkit-scrollbar-thumb { background: #333; border: 2px solid #0f0f0f; border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: #444; }

        /* Utilities */
        .glass-header { border-bottom: 1px solid #2a2a2a; background: #0f0f0f; }
        .sidebar-item:hover { background: #262626; color: #ededed; cursor: pointer; }
        .sidebar-item.active { background: #262626; color: #ededed; border-left: 2px solid #3b82f6; }
        
        /* The "Log" styling from the image */
        .log-step { display: flex; gap: 8px; margin-bottom: 8px; align-items: flex-start; opacity: 0.7; transition: opacity 0.2s; }
        .log-step:hover { opacity: 1; }
        .log-line { height: 100%; width: 1px; background: #333; margin-left: 4px; }
        
        /* Reader Mode Typography */
        .reader-content h1 { font-size: 24px; color: #ededed; font-weight: 600; margin-bottom: 16px; line-height: 1.2; }
        .reader-content p { margin-bottom: 16px; line-height: 1.6; color: #d4d4d4; font-size: 14px; }
        .reader-content img { border-radius: 4px; border: 1px solid #333; margin-bottom: 20px; width: 100%; }
        
        /* Blinking Cursor */
        .cursor::after { content: '‚ñã'; animation: blink 1s step-end infinite; margin-left: 2px; color: #3b82f6; }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body class="flex flex-col h-screen w-screen bg-bg">

    <!-- Top Menu Bar -->
    <header class="h-10 shrink-0 glass-header flex items-center justify-between px-4 text-xs select-none">
        <div class="flex items-center gap-4">
            <div class="flex items-center gap-2 text-highlight font-semibold">
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path></svg>
                <span>Veritas Agent</span>
            </div>
            <div class="flex gap-4 text-text ml-4">
                <span class="hover:text-highlight cursor-pointer">Editor</span>
                <span class="hover:text-highlight cursor-pointer">File</span>
                <span class="hover:text-highlight cursor-pointer">View</span>
                <span class="hover:text-highlight cursor-pointer">Run</span>
                <span class="hover:text-highlight cursor-pointer">Terminal</span>
            </div>
        </div>
        <div class="flex items-center gap-3 text-text">
            <span>Nov 27 20:58</span>
            <div class="flex gap-2">
                <div class="w-2 h-2 rounded-full bg-red-500"></div>
                <div class="w-2 h-2 rounded-full bg-yellow-500"></div>
                <div class="w-2 h-2 rounded-full bg-green-500"></div>
            </div>
        </div>
    </header>

    <!-- Main Workspace -->
    <div class="flex-1 flex overflow-hidden">

        <!-- LEFT SIDEBAR: Agent List -->
        <aside class="w-64 border-r border-border flex flex-col bg-bg shrink-0">
            <!-- Search -->
            <div class="p-3 border-b border-border">
                <input type="text" placeholder="Search Agents" class="w-full bg-panel border border-border rounded px-3 py-1.5 text-xs text-highlight focus:outline-none focus:border-border placeholder:text-text/50">
            </div>
            
            <!-- New Agent Button -->
            <div class="p-3">
                <button class="w-full border border-border rounded py-1.5 text-xs text-text hover:bg-panel hover:text-highlight transition-colors mb-4">New Agent</button>
                
                <div class="text-[10px] uppercase font-bold text-text/50 tracking-wider mb-2 px-1">IN PROGRESS</div>
                
                <!-- History Items -->
                <div class="space-y-0.5">
                    <div class="sidebar-item active px-3 py-2 rounded text-xs flex flex-col gap-0.5">
                        <span class="font-medium">Fact Check: Senate Bill</span>
                        <span class="text-[10px] text-accent animate-pulse">‚óè Running analysis</span>
                    </div>
                    <div class="sidebar-item px-3 py-2 rounded text-xs flex flex-col gap-0.5 opacity-60">
                        <span class="font-medium">Verify: TechCrunch AI</span>
                        <span class="text-[10px]">Completed 2h ago</span>
                    </div>
                    <div class="sidebar-item px-3 py-2 rounded text-xs flex flex-col gap-0.5 opacity-60">
                        <span class="font-medium">Scan: Twitter Thread</span>
                        <span class="text-[10px]">Flagged as Misinfo</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- CENTER: The Website / Browser -->
        <main class="flex-1 flex flex-col min-w-0 bg-bg">
            
            <!-- Task Header / URL Input -->
            <div class="p-6 pb-2">
                <div class="mb-2 flex items-center gap-2">
                    <h2 class="text-lg text-highlight font-medium">Investigate Source URL</h2>
                    <span class="text-xs bg-panel border border-border px-2 py-0.5 rounded text-text">Now ¬∑ Auto</span>
                </div>
                
                <!-- URL Input styled like the prompt box in image -->
                <div class="relative group">
                    <input type="text" id="urlInput" 
                        class="w-full bg-panel border border-border rounded-lg p-3 pr-24 text-sm text-highlight focus:outline-none focus:border-accent/50 transition-colors font-mono"
                        placeholder="Paste suspicious URL here..."
                        value="https://www.bbc.com/news/technology-67300000">
                    
                    <button onclick="runAnalysis()" id="runBtn" class="absolute right-2 top-2 bottom-2 bg-active hover:bg-border border border-border px-3 rounded text-xs text-highlight transition-colors flex items-center gap-2">
                        <span>Analyze</span>
                        <span class="text-[10px] text-text">‚Üµ</span>
                    </button>
                </div>
            </div>

            <!-- Browser Viewport -->
            <div class="flex-1 px-6 pb-6 overflow-hidden flex flex-col">
                <div class="flex-1 border border-border rounded-lg bg-[#0a0a0a] overflow-hidden relative flex flex-col">
                    
                    <!-- Browser Tab Bar -->
                    <div class="h-8 bg-panel border-b border-border flex items-center px-3 gap-3">
                        <div class="flex gap-1.5">
                            <div class="w-2.5 h-2.5 rounded-full bg-[#333]"></div>
                            <div class="w-2.5 h-2.5 rounded-full bg-[#333]"></div>
                        </div>
                        <div class="h-5 px-3 bg-bg rounded text-[10px] text-text flex items-center border border-border font-mono w-64 truncate opacity-60">
                            üîí <span id="browserUrl" class="ml-2">about:blank</span>
                        </div>
                        <div class="flex-1"></div>
                        <div class="text-[10px] text-text">HTML View</div>
                    </div>

                    <!-- Content Area -->
                    <div class="flex-1 overflow-y-auto p-8 relative" id="browserContent">
                        
                        <!-- Initial Placeholder -->
                        <div class="absolute inset-0 flex flex-col items-center justify-center text-text/30">
                            <svg class="w-16 h-16 mb-4 opacity-20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path></svg>
                            <span class="text-xs font-mono">WAITING FOR TARGET</span>
                        </div>

                        <!-- Scraped Content will be injected here -->
                        <div id="scrapedData" class="reader-content hidden max-w-3xl mx-auto">
                            <!-- Dynamic -->
                        </div>

                    </div>
                    
                    <!-- Loading Overlay -->
                    <div id="loader" class="absolute inset-0 bg-bg/90 z-20 hidden flex-col items-center justify-center">
                        <div class="w-8 h-8 border-2 border-accent border-t-transparent rounded-full animate-spin mb-4"></div>
                        <span class="text-xs text-accent font-mono animate-pulse">ESTABLISHING CONNECTION...</span>
                    </div>

                </div>

                <!-- Bottom Input (Chat style from image) -->
                <div class="mt-4 flex gap-2">
                    <div class="flex-1 relative">
                        <input type="text" placeholder="Add a follow-up..." class="w-full bg-panel border border-border rounded-md py-2 px-3 text-xs text-text focus:outline-none focus:border-border">
                    </div>
                    <div class="bg-panel border border-border rounded-md px-3 py-2 text-xs text-text cursor-pointer hover:text-highlight flex items-center gap-1">
                        Agent <span class="text-accent">Auto</span> ‚ñæ
                    </div>
                </div>
            </div>
        </main>

        <!-- RIGHT SIDEBAR: Logs & Verdict -->
        <aside class="w-96 border-l border-border flex flex-col bg-bg shrink-0">
            
            <!-- TOP RIGHT: Activity Logs (Styled like center of ref image) -->
            <div class="h-1/2 flex flex-col border-b border-border">
                <div class="h-9 border-b border-border flex items-center px-4 justify-between bg-panel/30">
                    <span class="text-xs font-medium text-highlight">Execution Log</span>
                    <span class="text-[10px] text-text">Terminal</span>
                </div>
                
                <div class="flex-1 overflow-y-auto p-4 font-mono text-xs" id="logContainer">
                    <!-- Logs go here -->
                    <div class="log-step">
                        <span class="text-accent">‚ûú</span>
                        <span class="text-text">System initialized</span>
                    </div>
                </div>
            </div>

            <!-- BOTTOM RIGHT: Verdict / Misinfo Stats -->
            <div class="flex-1 flex flex-col bg-panel/10">
                <div class="h-9 border-b border-border flex items-center px-4 justify-between bg-panel/30">
                    <span class="text-xs font-medium text-highlight">Analysis Verdict</span>
                    <span class="text-[10px] text-text">JSON Output</span>
                </div>
                
                <div class="flex-1 p-6 flex flex-col items-center justify-center text-center relative overflow-hidden">
                    
                    <!-- Empty State -->
                    <div id="verdictEmpty" class="text-text/40 text-xs">
                        No analysis data available.<br>Run an agent to generate report.
                    </div>

                    <!-- Result State -->
                    <div id="verdictContent" class="hidden w-full flex flex-col gap-6">
                        
                        <!-- Main Score -->
                        <div class="flex flex-col items-center">
                            <div id="scoreBadge" class="w-20 h-20 rounded-full border-4 border-border flex items-center justify-center text-2xl font-bold text-text mb-2 transition-all duration-1000">
                                --
                            </div>
                            <div id="verdictText" class="text-lg font-bold text-highlight tracking-wide">--</div>
                            <div class="text-[10px] text-text uppercase tracking-widest mt-1">Trust Score</div>
                        </div>

                        <!-- Details List -->
                        <div class="w-full bg-bg border border-border rounded p-3 text-left space-y-3">
                            <div>
                                <div class="flex justify-between text-[10px] text-text mb-1">FACTUALITY</div>
                                <div class="h-1 w-full bg-border rounded overflow-hidden">
                                    <div id="barFact" class="h-full bg-accent w-0 transition-all duration-1000"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-[10px] text-text mb-1">SENTIMENT BIAS</div>
                                <div class="h-1 w-full bg-border rounded overflow-hidden">
                                    <div id="barBias" class="h-full bg-accent w-0 transition-all duration-1000"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-[10px] text-text mb-1">SOURCE REPUTATION</div>
                                <div class="h-1 w-full bg-border rounded overflow-hidden">
                                    <div id="barRep" class="h-full bg-accent w-0 transition-all duration-1000"></div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </aside>

    </div>

    <!-- Logic Script -->
    <script>
        const MICROLINK_API = "https://api.microlink.io";
        
        const urlInput = document.getElementById('urlInput');
        const runBtn = document.getElementById('runBtn');
        const browserUrl = document.getElementById('browserUrl');
        const scrapedData = document.getElementById('scrapedData');
        const loader = document.getElementById('loader');
        const logContainer = document.getElementById('logContainer');
        
        const verdictEmpty = document.getElementById('verdictEmpty');
        const verdictContent = document.getElementById('verdictContent');
        const scoreBadge = document.getElementById('scoreBadge');
        const verdictText = document.getElementById('verdictText');
        
        const delay = ms => new Promise(r => setTimeout(r, ms));

        function addLog(text, subtext = null) {
            const div = document.createElement('div');
            div.className = "flex flex-col gap-1 mb-4 animate-pulse-slow";
            div.style.animationIterationCount = "1";
            
            let html = `
                <div class="flex items-center gap-2 text-highlight">
                    <span class="text-accent text-[10px]">‚óè</span>
                    <span>${text}</span>
                </div>
            `;
            
            if(subtext) {
                html += `
                <div class="flex gap-3 ml-1.5 h-full">
                    <div class="w-[1px] bg-border"></div>
                    <div class="text-text py-1">${subtext}</div>
                </div>`;
            }

            div.innerHTML = html;
            logContainer.appendChild(div);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        async function runAnalysis() {
            const url = urlInput.value;
            if(!url) return;

            // Reset
            runBtn.disabled = true;
            verdictContent.classList.add('hidden');
            verdictEmpty.classList.remove('hidden');
            scrapedData.innerHTML = '';
            scrapedData.classList.add('hidden');
            logContainer.innerHTML = ''; // Clear logs
            
            addLog("Initializing Agent Process", "Mode: Auto-Intervention");
            
            // 1. Scrape
            loader.classList.remove('hidden');
            loader.style.display = 'flex';
            browserUrl.innerText = url;
            
            await delay(800);
            addLog(`Visiting Target URL`, url);
            
            try {
                const response = await fetch(`${MICROLINK_API}/?url=${encodeURIComponent(url)}&palette=true`);
                const json = await response.json();
                const data = json.data;
                
                // 2. Render Page
                renderPage(data);
                loader.style.display = 'none';
                scrapedData.classList.remove('hidden');

                // 3. Analysis Steps (Visual Logs)
                await delay(1000);
                addLog("Parsing DOM Structure", "Found 42 paragraphs, 3 images");
                
                await delay(1200);
                addLog("Extracting Claims", `Identified entity: "${data.title.substring(0, 15)}..."`);
                
                await delay(1000);
                addLog("Querying Knowledge Base", "Cross-referencing 3 trusted nodes...");
                
                await delay(1000);
                addLog("Running Sentiment Analysis", "Detecting emotional charge...");
                
                await delay(800);
                addLog("Finalizing Verdict", "Generating JSON report...");

                showVerdict(data);

            } catch (e) {
                addLog("Error", "Connection Refused / Scraper Blocked");
                loader.style.display = 'none';
                runBtn.disabled = false;
            }
        }

        function renderPage(data) {
            const date = data.date ? new Date(data.date).toLocaleDateString() : "Unknown Date";
            const html = `
                <div class="text-[10px] text-accent uppercase tracking-widest mb-4 flex items-center gap-2">
                    <span class="w-1 h-1 bg-accent rounded-full"></span>
                    ${data.publisher || 'WEB SOURCE'}
                    <span class="text-border">|</span>
                    ${date}
                </div>
                <h1>${data.title || "Untitled Page"}</h1>
                ${data.image ? `<img src="${data.image.url}" />` : ''}
                <p>${data.description || "No description content available."}</p>
                <p class="opacity-50">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                <p class="opacity-50">Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident.</p>
            `;
            scrapedData.innerHTML = html;
        }

        function showVerdict(data) {
            verdictEmpty.classList.add('hidden');
            verdictContent.classList.remove('hidden');
            runBtn.disabled = false;

            // Simple Logic for Demo
            const isReliable = ['bbc', 'reuters', 'wikipedia', 'techcrunch'].some(d => data.url.includes(d));
            
            const score = isReliable ? 94 : 42;
            const color = isReliable ? '#22c55e' : '#ef4444'; // Green vs Red
            const text = isReliable ? "High Credibility" : "Suspected Misinfo";

            scoreBadge.innerText = score;
            scoreBadge.style.borderColor = color;
            scoreBadge.style.color = color;
            
            verdictText.innerText = text;
            verdictText.style.color = color;

            // Bars
            document.getElementById('barFact').style.width = isReliable ? '90%' : '30%';
            document.getElementById('barFact').style.backgroundColor = color;
            
            document.getElementById('barBias').style.width = isReliable ? '20%' : '85%'; // Low bias is good
            document.getElementById('barBias').style.backgroundColor = isReliable ? '#22c55e' : '#ef4444';

            document.getElementById('barRep').style.width = isReliable ? '95%' : '15%';
            document.getElementById('barRep').style.backgroundColor = color;
        }
        
    </script>
</body>
</html>