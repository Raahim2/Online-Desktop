<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive CRT Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        /* Minimal style block for effects not easily achievable with pure Tailwind */
        body {
            font-family: 'VT323', monospace; /* Classic terminal font */
        }
        .crt-scanlines::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 4px, 6px 100%;
            z-index: 2;
            pointer-events: none;
            animation: flicker 0.15s infinite;
        }
        .crt-glow {
             text-shadow: 0 0 8px #39ff14, 0 0 10px #39ff14; /* Neon green glow */
        }
        @keyframes flicker {
            0% { opacity: 1; }
            50% { opacity: 0.85; }
            100% { opacity: 1; }
        }
        @keyframes text-glitch {
            0% { transform: translate(0, 0); opacity: 1; }
            25% { transform: translate(2px, -2px); color: #ff3333; opacity: 0.8; }
            50% { transform: translate(-2px, 2px); color: #33ff33; opacity: 1; }
            75% { transform: translate(2px, 2px); color: #3333ff; opacity: 0.8; }
            100% { transform: translate(0, 0); opacity: 1; }
        }
        .glitch-active {
            animation: text-glitch 0.2s infinite alternate;
        }
        .terminal-output::-webkit-scrollbar {
            width: 8px;
        }
        .terminal-output::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        .terminal-output::-webkit-scrollbar-thumb {
            background-color: #39ff14;
            border-radius: 4px;
            border: 2px solid #1a1a1a;
        }
    </style>
</head>
<body class="bg-black text-green-400 min-h-screen flex flex-col items-center justify-center p-4 selection:bg-green-400 selection:text-black">

    <main class="w-full max-w-4xl mx-auto bg-gray-900/80 border-4 border-gray-700 rounded-lg shadow-2xl shadow-green-500/10 overflow-hidden relative crt-scanlines">
        <div class="p-4 md:p-6 lg:p-8 crt-glow relative z-10">

            <!-- Terminal Header -->
            <header class="flex justify-between items-center pb-2 border-b border-gray-700/50 mb-4">
                <div class="flex items-center space-x-2">
                    <span class="w-3 h-3 bg-red-500 rounded-full inline-block"></span>
                    <span class="w-3 h-3 bg-yellow-500 rounded-full inline-block"></span>
                    <span class="w-3 h-3 bg-green-500 rounded-full inline-block"></span>
                </div>
                <h1 class="text-lg md:text-xl font-bold text-center text-green-300">RETRO TERM v1.0</h1>
                <div>
                    <button id="glitchButton" class="text-xs border border-green-400 px-2 py-1 rounded hover:bg-green-400 hover:text-black transition-colors duration-150">TRIGGER GLITCH</button>
                </div>
            </header>

            <!-- Terminal Output Area -->
            <section id="terminalOutput" class="terminal-output h-64 md:h-96 overflow-y-auto text-sm md:text-base mb-4 pr-2">
                <p>Initializing RetroTerm BIOS...</p>
                <p>Memory Check: 640KB OK</p>
                <p>Detecting Drives... [DONE]</p>
                <p>Booting from C:</p>
                <p class="text-yellow-400">WARNING: System instability detected. Glitch potential HIGH.</p>
                <p>...</p>
                <p>Welcome to RetroTerm OS!</p>
                <p>Type 'help' for a list of simulated commands.</p>
                <p id="typewriter"></p>
                <div id="commandOutput"></div>
                <p>&nbsp;</p> <!-- Spacer -->
            </section>

            <!-- Input Area -->
            <footer class="flex items-center pt-2 border-t border-gray-700/50">
                <span class="text-green-400 mr-2">C:\&gt;</span>
                <input type="text" id="commandInput" class="flex-grow bg-transparent border-none outline-none text-green-400 placeholder-green-700 caret-green-400 text-sm md:text-base" placeholder="Enter command...">
                <div id="cursor" class="w-2 h-4 bg-green-400 inline-block ml-1 animate-pulse"></div>
            </footer>

        </div>
    </main>

    <footer class="text-center text-gray-500 text-xs mt-6">
        <p>CRT Terminal Simulation | Built with HTML & Tailwind CSS</p>
        <p>Disclaimer: This is a visual simulation. Commands are not real.</p>
    </footer>

    <script>
        const terminalOutput = document.getElementById('terminalOutput');
        const commandInput = document.getElementById('commandInput');
        const commandOutput = document.getElementById('commandOutput');
        const glitchButton = document.getElementById('glitchButton');
        const cursor = document.getElementById('cursor');
        const typewriterElement = document.getElementById('typewriter');

        // --- Glitch Effect ---
        let glitchTimeout;
        function triggerGlitch() {
            const elementsToGlitch = terminalOutput.querySelectorAll('p');
            const randomElement = elementsToGlitch[Math.floor(Math.random() * elementsToGlitch.length)];

            if (randomElement) {
                randomElement.classList.add('glitch-active');

                // Remove glitch effect after a short duration
                clearTimeout(glitchTimeout); // Clear previous timeout if button is spammed
                glitchTimeout = setTimeout(() => {
                    randomElement.classList.remove('glitch-active');
                }, 300 + Math.random() * 400); // Random duration between 300ms and 700ms
            }
        }
        glitchButton.addEventListener('click', triggerGlitch);

        // --- Simple Command Simulation ---
        commandInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                const command = commandInput.value.trim().toLowerCase();
                const outputLine = document.createElement('p');
                outputLine.textContent = `C:\\> ${commandInput.value}`; // Show entered command
                commandOutput.appendChild(outputLine);

                handleCommand(command);

                commandInput.value = ''; // Clear input
                terminalOutput.scrollTop = terminalOutput.scrollHeight; // Scroll to bottom
                event.preventDefault(); // Prevent form submission if it were in a form
            }
        });

        function handleCommand(command) {
            const output = document.createElement('p');
            output.classList.add('mb-1'); // Add some spacing

            switch (command) {
                case 'help':
                    output.innerHTML = `Available commands:<br>
                                        &nbsp; help - Show this help message<br>
                                        &nbsp; clear - Clear the screen<br>
                                        &nbsp; date - Display simulated date<br>
                                        &nbsp; dir - List fake directory contents<br>
                                        &nbsp; glitch - Trigger a visual glitch`;
                    break;
                case 'clear':
                    commandOutput.innerHTML = ''; // Clear only the command output area
                    output.textContent = 'Screen cleared (output area only).';
                    break;
                case 'date':
                    output.textContent = `Current system date: ${new Date().toDateString()}`;
                    break;
                case 'dir':
                    output.innerHTML = `Volume in drive C has no label.<br>
                                        Directory of C:\\<br><br>
                                        COMMAND.COM &nbsp;&nbsp;&nbsp; 54,619 05-11-95 6:22p<br>
                                        CONFIG.SYS  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 128 03-15-95 1:03a<br>
                                        AUTOEXEC.BAT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 256 03-15-95 1:05a<br>
                                        GAMES      &lt;DIR&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01-01-96 10:00a<br>
                                        README.TXT  &nbsp;&nbsp;&nbsp;&nbsp; 1,024 12-25-95 12:00p<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 File(s) &nbsp;&nbsp;&nbsp; 56,027 bytes<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 Dir(s) &nbsp; 12,345,678 bytes free`;
                    break;
                case 'glitch':
                    triggerGlitch();
                    output.textContent = 'Glitch sequence initiated!';
                    break;
                case '': // Handle empty input
                     // Add a new prompt line without output
                     const promptLine = document.createElement('p');
                     promptLine.textContent = `C:\\>`;
                     commandOutput.appendChild(promptLine);
                     // We don't actually append the empty 'output' element in this case
                     terminalOutput.scrollTop = terminalOutput.scrollHeight;
                     return; // Exit early
                default:
                    output.textContent = `Bad command or file name: '${command}'`;
                    output.classList.add('text-red-400');
            }
            commandOutput.appendChild(output);
            terminalOutput.scrollTop = terminalOutput.scrollHeight; // Scroll after adding output
        }

        // --- Simple Typewriter Effect ---
        const textToType = "System online. All functions nominal... mostly.";
        let typeIndex = 0;
        function typeWriter() {
            if (typeIndex < textToType.length) {
                typewriterElement.textContent += textToType.charAt(typeIndex);
                typeIndex++;
                setTimeout(typeWriter, 50 + Math.random() * 50); // Typing speed variation
                terminalOutput.scrollTop = terminalOutput.scrollHeight; // Keep scrolled down
            } else {
                 // Optionally trigger a glitch after typing finishes
                 setTimeout(triggerGlitch, 500);
            }
        }

        // Start typewriter after a short delay
        setTimeout(typeWriter, 1000);

        // --- Focus Input & Cursor Handling ---
        commandInput.addEventListener('focus', () => cursor.classList.remove('opacity-0'));
        commandInput.addEventListener('blur', () => cursor.classList.add('opacity-0'));

        // Initial focus on input
        commandInput.focus();

        // Periodically trigger random glitches for ambiance
        setInterval(() => {
            if (Math.random() < 0.05) { // 5% chance every 5 seconds
                triggerGlitch();
            }
        }, 5000);

    </script>

</body>
</html>