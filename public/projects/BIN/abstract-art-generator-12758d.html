<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abstract Art Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Minimal custom styles if needed, prefer Tailwind */
        #artCanvas svg {
            display: block; /* Remove extra space below SVG */
            border: 1px solid #e5e7eb; /* Default border */
            background-color: #ffffff; /* Default background */
        }
        /* Style range inputs consistently */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #d1d5db; /* gray-300 */
            border-radius: 5px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }
        input[type="range"]:hover {
            opacity: 1;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #3b82f6; /* blue-500 */
            border-radius: 50%;
            cursor: pointer;
        }
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #3b82f6; /* blue-500 */
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
         /* Style color input */
        input[type="color"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 40px;
            height: 40px;
            background-color: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            border-radius: 4px;
            overflow: hidden;
        }
        input[type="color"]::-webkit-color-swatch {
            border-radius: 4px;
            border: 1px solid #d1d5db; /* gray-300 */
        }
        input[type="color"]::-moz-color-swatch {
            border-radius: 4px;
            border: 1px solid #d1d5db; /* gray-300 */
        }
    </style>
</head>
<body class="bg-gray-100 font-sans antialiased">

    <div class="flex flex-col lg:flex-row min-h-screen">

        <!-- Controls Panel -->
        <aside class="w-full lg:w-80 bg-white p-6 shadow-md lg:h-screen lg:overflow-y-auto shrink-0">
            <h1 class="text-2xl font-bold mb-6 text-gray-800">Abstract Art Generator</h1>

            <form id="controlsForm" class="space-y-6">

                <!-- Shape Parameters -->
                <section>
                    <h2 class="text-lg font-semibold mb-3 text-gray-700 border-b pb-2">Shapes</h2>
                    <div class="space-y-4">
                        <div>
                            <label for="numShapes" class="block text-sm font-medium text-gray-600 mb-1">Number of Shapes (<span id="numShapesValue">50</span>)</label>
                            <input type="range" id="numShapes" name="numShapes" min="5" max="500" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <div>
                            <label for="minSize" class="block text-sm font-medium text-gray-600 mb-1">Min Size (<span id="minSizeValue">10</span>px)</label>
                            <input type="range" id="minSize" name="minSize" min="1" max="100" value="10" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <div>
                            <label for="maxSize" class="block text-sm font-medium text-gray-600 mb-1">Max Size (<span id="maxSizeValue">150</span>px)</label>
                            <input type="range" id="maxSize" name="maxSize" min="10" max="300" value="150" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-2">Shape Types</label>
                            <div class="flex flex-wrap gap-x-4 gap-y-2">
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="shapeType" value="rect" class="form-checkbox h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" checked>
                                    <span class="ml-2 text-sm text-gray-700">Rectangles</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="shapeType" value="circle" class="form-checkbox h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" checked>
                                    <span class="ml-2 text-sm text-gray-700">Circles</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="shapeType" value="ellipse" class="form-checkbox h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                    <span class="ml-2 text-sm text-gray-700">Ellipses</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="shapeType" value="line" class="form-checkbox h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                    <span class="ml-2 text-sm text-gray-700">Lines</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Color Parameters -->
                <section>
                    <h2 class="text-lg font-semibold mb-3 text-gray-700 border-b pb-2">Colors</h2>
                     <div class="space-y-4">
                        <div>
                            <label for="colorPalette" class="block text-sm font-medium text-gray-600 mb-1">Color Palette</label>
                            <select id="colorPalette" name="colorPalette" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option value="random_vibrant">Random Vibrant</option>
                                <option value="random_pastel">Random Pastel</option>
                                <option value="blues">Blues</option>
                                <option value="greens">Greens</option>
                                <option value="reds_oranges">Reds & Oranges</option>
                                <option value="purples_pinks">Purples & Pinks</option>
                                <option value="grayscale">Grayscale</option>
                            </select>
                        </div>
                         <div>
                            <label for="opacity" class="block text-sm font-medium text-gray-600 mb-1">Shape Opacity (<span id="opacityValue">0.8</span>)</label>
                            <input type="range" id="opacity" name="opacity" min="0.1" max="1" step="0.05" value="0.8" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                    </div>
                </section>

                <!-- Canvas Parameters -->
                <section>
                    <h2 class="text-lg font-semibold mb-3 text-gray-700 border-b pb-2">Canvas</h2>
                    <div class="space-y-4">
                         <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="canvasWidth" class="block text-sm font-medium text-gray-600 mb-1">Width (px)</label>
                                <input type="number" id="canvasWidth" name="canvasWidth" value="800" min="100" max="2000" step="10" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            </div>
                            <div>
                                <label for="canvasHeight" class="block text-sm font-medium text-gray-600 mb-1">Height (px)</label>
                                <input type="number" id="canvasHeight" name="canvasHeight" value="600" min="100" max="2000" step="10" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <label for="bgColor" class="block text-sm font-medium text-gray-600">Background Color</label>
                            <input type="color" id="bgColor" name="bgColor" value="#ffffff" class="mt-1">
                        </div>
                    </div>
                </section>

                <!-- Action Buttons -->
                <section class="pt-4 space-y-3">
                    <button type="button" id="generateBtn" class="w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.51A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.51-1.276z" clip-rule="evenodd" />
                        </svg>
                        Generate / Randomize
                    </button>
                    <button type="button" id="downloadBtn" class="w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out">
                       <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                        Download SVG
                    </button>
                </section>
            </form>
        </aside>

        <!-- Canvas Area -->
        <main class="flex-1 flex items-center justify-center p-4 md:p-8 bg-gray-200">
            <div id="artCanvasContainer" class="w-full h-full max-w-full max-h-full flex items-center justify-center overflow-auto">
                 <div id="artCanvas" class="shadow-lg">
                    <!-- SVG will be generated here -->
                    <svg id="generatedArt" xmlns="http://www.w3.org/2000/svg" width="800" height="600" viewBox="0 0 800 600" style="background-color: #ffffff;"></svg>
                 </div>
            </div>
        </main>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const controlsForm = document.getElementById('controlsForm');
            const generateBtn = document.getElementById('generateBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const artCanvas = document.getElementById('artCanvas');
            const svgElement = document.getElementById('generatedArt');
            const artCanvasContainer = document.getElementById('artCanvasContainer');

            // Input elements & value displays
            const numShapesInput = document.getElementById('numShapes');
            const numShapesValue = document.getElementById('numShapesValue');
            const minSizeInput = document.getElementById('minSize');
            const minSizeValue = document.getElementById('minSizeValue');
            const maxSizeInput = document.getElementById('maxSize');
            const maxSizeValue = document.getElementById('maxSizeValue');
            const opacityInput = document.getElementById('opacity');
            const opacityValue = document.getElementById('opacityValue');
            const canvasWidthInput = document.getElementById('canvasWidth');
            const canvasHeightInput = document.getElementById('canvasHeight');
            const bgColorInput = document.getElementById('bgColor');
            const colorPaletteSelect = document.getElementById('colorPalette');
            const shapeTypeCheckboxes = document.querySelectorAll('input[name="shapeType"]');

            // Tailwind Color Palettes (simplified representation)
            // Using CSS variable names for potential future use, but selecting classes directly for now
            const tailwindColors = {
                vibrant: ['red-500', 'orange-500', 'yellow-400', 'lime-500', 'green-500', 'teal-500', 'cyan-500', 'blue-500', 'indigo-500', 'purple-500', 'pink-500'],
                pastel: ['red-300', 'orange-300', 'yellow-200', 'lime-300', 'green-300', 'teal-300', 'cyan-300', 'blue-300', 'indigo-300', 'purple-300', 'pink-300'],
                blues: ['sky-300', 'sky-500', 'sky-700', 'blue-300', 'blue-500', 'blue-700', 'indigo-300', 'indigo-500', 'indigo-700'],
                greens: ['lime-300', 'lime-500', 'lime-700', 'green-300', 'green-500', 'green-700', 'emerald-300', 'emerald-500', 'emerald-700'],
                reds_oranges: ['red-300', 'red-500', 'red-700', 'orange-300', 'orange-500', 'orange-700', 'amber-300', 'amber-500', 'amber-700'],
                purples_pinks: ['pink-300', 'pink-500', 'pink-700', 'fuchsia-300', 'fuchsia-500', 'fuchsia-700', 'purple-300', 'purple-500', 'purple-700', 'violet-300', 'violet-500', 'violet-700'],
                grayscale: ['gray-300', 'gray-400', 'gray-500', 'gray-600', 'gray-700', 'gray-800', 'slate-300', 'slate-500', 'slate-700']
            };

            function getRandomElement(arr) {
                return arr[Math.floor(Math.random() * arr.length)];
            }

            function getRandomNumber(min, max) {
                return Math.random() * (max - min) + min;
            }

            function getRandomInt(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            function getSelectedColors() {
                const paletteKey = colorPaletteSelect.value;
                switch (paletteKey) {
                    case 'random_vibrant':
                        return tailwindColors.vibrant;
                    case 'random_pastel':
                        return tailwindColors.pastel;
                    case 'blues':
                        return tailwindColors.blues;
                    case 'greens':
                        return tailwindColors.greens;
                    case 'reds_oranges':
                        return tailwindColors.reds_oranges;
                    case 'purples_pinks':
                        return tailwindColors.purples_pinks;
                    case 'grayscale':
                        return tailwindColors.grayscale;
                    default:
                        // Combine some vibrant and pastel for a default random mix
                        return [...tailwindColors.vibrant, ...tailwindColors.pastel];
                }
            }

            function getRandomColorClass() {
                const selectedPalette = getSelectedColors();
                if (!selectedPalette || selectedPalette.length === 0) {
                    return 'gray-500'; // Fallback
                }
                return getRandomElement(selectedPalette);
            }

            // Convert Tailwind class like 'blue-500' to actual hex/rgb for SVG fill
            // This is a limitation - we can't directly use Tailwind classes in SVG attributes easily without post-processing or complex JS.
            // For simplicity here, we'll map common ones or use a placeholder approach.
            // A better approach might involve defining colors in CSS variables and using them.
            // Let's map a few for demonstration. A full mapping is extensive.
            const colorMap = {
                'red-500': '#ef4444', 'orange-500': '#f97316', 'yellow-400': '#facc15', 'lime-500': '#84cc16',
                'green-500': '#22c55e', 'teal-500': '#14b8a6', 'cyan-500': '#06b6d4', 'blue-500': '#3b82f6',
                'indigo-500': '#6366f1', 'purple-500': '#a855f7', 'pink-500': '#ec4899',
                'red-300': '#fca5a5', 'orange-300': '#fdba74', 'yellow-200': '#fef08a', 'lime-300': '#bef264',
                'green-300': '#86efac', 'teal-300': '#99f6e4', 'cyan-300': '#67e8f9', 'blue-300': '#93c5fd',
                'indigo-300': '#a5b4fc', 'purple-300': '#d8b4fe', 'pink-300': '#f9a8d4',
                'sky-300': '#7dd3fc', 'sky-500': '#0ea5e9', 'sky-700': '#0369a1',
                'emerald-300': '#6ee7b7', 'emerald-500': '#10b981', 'emerald-700': '#047857',
                'amber-300': '#fcd34d', 'amber-500': '#f59e0b', 'amber-700': '#b45309',
                'fuchsia-300': '#f0abfc', 'fuchsia-500': '#d946ef', 'fuchsia-700': '#a21caf',
                'violet-300': '#c4b5fd', 'violet-500': '#8b5cf6', 'violet-700': '#6d28d9',
                'gray-300': '#d1d5db', 'gray-400': '#9ca3af', 'gray-500': '#6b7280', 'gray-600': '#4b5563',
                'gray-700': '#374151', 'gray-800': '#1f2937',
                'slate-300': '#cbd5e1', 'slate-500': '#64748b', 'slate-700': '#334155'
                // Add more mappings as needed
            };

            function getHexColor(tailwindClassName) {
                return colorMap[tailwindClassName] || '#6b7280'; // Default to gray-500 if not found
            }

            function generateArt() {
                const numShapes = parseInt(numShapesInput.value);
                const minSize = parseInt(minSizeInput.value);
                const maxSize = parseInt(maxSizeInput.value);
                const opacity = parseFloat(opacityInput.value);
                const canvasWidth = parseInt(canvasWidthInput.value);
                const canvasHeight = parseInt(canvasHeightInput.value);
                const bgColor = bgColorInput.value;

                const selectedShapeTypes = Array.from(shapeTypeCheckboxes)
                                              .filter(cb => cb.checked)
                                              .map(cb => cb.value);

                if (selectedShapeTypes.length === 0) {
                    alert("Please select at least one shape type.");
                    return;
                }

                // Update SVG dimensions and background
                svgElement.setAttribute('width', canvasWidth);
                svgElement.setAttribute('height', canvasHeight);
                svgElement.setAttribute('viewBox', `0 0 ${canvasWidth} ${canvasHeight}`);
                svgElement.style.backgroundColor = bgColor;

                // Clear previous art
                svgElement.innerHTML = '';

                // Generate shapes
                for (let i = 0; i < numShapes; i++) {
                    const shapeType = getRandomElement(selectedShapeTypes);
                    const colorClass = getRandomColorClass();
                    const fillColor = getHexColor(colorClass);
                    const elementOpacity = opacity * getRandomNumber(0.7, 1.0); // Add slight random variation to opacity

                    let shape;
                    const size = getRandomInt(minSize, maxSize);
                    const x = getRandomInt(0, canvasWidth);
                    const y = getRandomInt(0, canvasHeight);

                    switch (shapeType) {
                        case 'rect':
                            shape = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                            shape.setAttribute('x', x - size / 2);
                            shape.setAttribute('y', y - size / 2);
                            shape.setAttribute('width', size);
                            shape.setAttribute('height', getRandomInt(minSize, maxSize)); // Allow non-square rects
                            shape.setAttribute('transform', `rotate(${getRandomInt(0, 90)} ${x} ${y})`);
                            break;
                        case 'circle':
                            shape = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                            shape.setAttribute('cx', x);
                            shape.setAttribute('cy', y);
                            shape.setAttribute('r', size / 2);
                            break;
                        case 'ellipse':
                            shape = document.createElementNS('http://www.w3.org/2000/svg', 'ellipse');
                            shape.setAttribute('cx', x);
                            shape.setAttribute('cy', y);
                            shape.setAttribute('rx', size / 2);
                            shape.setAttribute('ry', getRandomInt(minSize, maxSize) / 2);
                            shape.setAttribute('transform', `rotate(${getRandomInt(0, 180)} ${x} ${y})`);
                            break;
                        case 'line':
                            shape = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                            const x2 = x + getRandomInt(-size, size);
                            const y2 = y + getRandomInt(-size, size);
                            shape.setAttribute('x1', x);
                            shape.setAttribute('y1', y);
                            shape.setAttribute('x2', x2);
                            shape.setAttribute('y2', y2);
                            shape.setAttribute('stroke', fillColor); // Lines use stroke, not fill
                            shape.setAttribute('stroke-width', getRandomInt(1, Math.max(2, minSize / 5))); // Thicker lines based on size
                            shape.setAttribute('stroke-opacity', elementOpacity);
                            break;
                    }

                    if (shapeType !== 'line') {
                        shape.setAttribute('fill', fillColor);
                        shape.setAttribute('fill-opacity', elementOpacity);
                    }
                    // Optionally add stroke to shapes other than lines
                    // if (shapeType !== 'line' && Math.random() > 0.7) {
                    //     shape.setAttribute('stroke', getHexColor(getRandomColorClass()));
                    //     shape.setAttribute('stroke-width', getRandomInt(1, 3));
                    //     shape.setAttribute('stroke-opacity', opacity);
                    // }

                    svgElement.appendChild(shape);
                }
            }

            function downloadSVG() {
                const svgData = new XMLSerializer().serializeToString(svgElement);
                const blob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.setAttribute('href', url);
                link.setAttribute('download', 'abstract-art.svg');
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            }

            // Update display values for range inputs
            function updateRangeValue(inputElement, outputElement, unit = '') {
                 outputElement.textContent = inputElement.value + unit;
            }

            numShapesInput.addEventListener('input', () => updateRangeValue(numShapesInput, numShapesValue));
            minSizeInput.addEventListener('input', () => updateRangeValue(minSizeInput, minSizeValue, 'px'));
            maxSizeInput.addEventListener('input', () => updateRangeValue(maxSizeInput, maxSizeValue, 'px'));
            opacityInput.addEventListener('input', () => updateRangeValue(opacityInput, opacityValue));

            // Event Listeners
            generateBtn.addEventListener('click', generateArt);
            downloadBtn.addEventListener('click', downloadSVG);

            // Update canvas size and background immediately on change
            canvasWidthInput.addEventListener('change', () => {
                svgElement.setAttribute('width', canvasWidthInput.value);
                svgElement.setAttribute('viewBox', `0 0 ${canvasWidthInput.value} ${canvasHeightInput.value}`);
            });
             canvasHeightInput.addEventListener('change', () => {
                svgElement.setAttribute('height', canvasHeightInput.value);
                svgElement.setAttribute('viewBox', `0 0 ${canvasWidthInput.value} ${canvasHeightInput.value}`);
            });
            bgColorInput.addEventListener('input', () => { // Use 'input' for live color preview
                svgElement.style.backgroundColor = bgColorInput.value;
            });

            // Initial generation
            generateArt();
        });
    </script>

</body>
</html>