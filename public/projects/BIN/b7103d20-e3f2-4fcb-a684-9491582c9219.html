<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Impossible Shape Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Minimal style for SVG stroke/fill transitions if needed */
        #shape-display svg .shape-part {
            transition: fill 0.3s ease, stroke 0.3s ease;
        }
        /* Add subtle animation */
        @keyframes subtle-float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        .shape-container:hover svg {
            animation: subtle-float 3s ease-in-out infinite;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-800 dark:to-gray-900 text-gray-900 dark:text-gray-100 font-sans antialiased">

    <div class="container mx-auto px-4 py-8 min-h-screen flex flex-col">

        <header class="text-center mb-10 md:mb-16">
            <h1 class="text-4xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 dark:from-purple-400 dark:via-pink-400 dark:to-red-400 mb-3">
                Impossible Shape Explorer
            </h1>
            <p class="text-lg md:text-xl text-gray-600 dark:text-gray-400">Craft and observe mind-bending geometries.</p>
        </header>

        <main class="flex-grow flex flex-col lg:flex-row gap-8 md:gap-12">

            <!-- Control Panel -->
            <aside class="w-full lg:w-1/3 xl:w-1/4 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700">
                <h2 class="text-2xl font-semibold mb-5 border-b pb-3 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200">Customize</h2>
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Select Shape:</label>
                        <div class="grid grid-cols-2 gap-3">
                            <button id="btn-penrose_triangle" onclick="selectShape('penrose_triangle')" class="control-button group relative flex items-center justify-center bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 dark:from-indigo-600 dark:to-blue-600 dark:hover:from-indigo-700 dark:hover:to-blue-700 text-white font-medium py-2 px-4 rounded-lg shadow-md transition duration-200 ease-in-out transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800">
                                Triangle
                                <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block px-2 py-1 bg-gray-700 text-white text-xs rounded-md whitespace-nowrap">
                                    Penrose Triangle
                                </span>
                            </button>
                            <button id="btn-penrose_stairs" onclick="selectShape('penrose_stairs')" class="control-button group relative flex items-center justify-center bg-gradient-to-r from-teal-500 to-green-500 hover:from-teal-600 hover:to-green-600 dark:from-teal-600 dark:to-green-600 dark:hover:from-teal-700 dark:hover:to-green-700 text-white font-medium py-2 px-4 rounded-lg shadow-md transition duration-200 ease-in-out transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 dark:focus:ring-offset-gray-800">
                                Stairs
                                <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block px-2 py-1 bg-gray-700 text-white text-xs rounded-md whitespace-nowrap">
                                    Penrose Stairs
                                </span>
                            </button>
                            <button id="btn-necker_cube" onclick="selectShape('necker_cube')" class="control-button group relative flex items-center justify-center bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 dark:from-purple-600 dark:to-pink-600 dark:hover:from-purple-700 dark:hover:to-pink-700 text-white font-medium py-2 px-4 rounded-lg shadow-md transition duration-200 ease-in-out transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-offset-gray-800">
                                Cube
                                <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block px-2 py-1 bg-gray-700 text-white text-xs rounded-md whitespace-nowrap">
                                    Necker Cube
                                </span>
                            </button>
                            <button id="btn-impossible_cuboid" onclick="selectShape('impossible_cuboid')" class="control-button group relative flex items-center justify-center bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 dark:from-orange-600 dark:to-red-600 dark:hover:from-orange-700 dark:hover:to-red-700 text-white font-medium py-2 px-4 rounded-lg shadow-md transition duration-200 ease-in-out transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 dark:focus:ring-offset-gray-800">
                                Cuboid
                                <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block px-2 py-1 bg-gray-700 text-white text-xs rounded-md whitespace-nowrap">
                                    Impossible Cuboid
                                </span>
                            </button>
                             <button id="btn-clear" onclick="selectShape('clear')" class="control-button col-span-2 group relative flex items-center justify-center bg-gray-400 hover:bg-gray-500 dark:bg-gray-600 dark:hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg shadow-md transition duration-200 ease-in-out transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 dark:focus:ring-offset-gray-800">
                                Clear
                            </button>
                        </div>
                    </div>
                     <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Primary Color:</label>
                        <div class="flex flex-wrap gap-2">
                            <button aria-label="Indigo" onclick="setColor('#6366F1')" class="h-8 w-8 rounded-full bg-indigo-500 border-2 border-transparent hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800 transition duration-150"></button>
                            <button aria-label="Teal" onclick="setColor('#14B8A6')" class="h-8 w-8 rounded-full bg-teal-500 border-2 border-transparent hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 dark:focus:ring-offset-gray-800 transition duration-150"></button>
                            <button aria-label="Purple" onclick="setColor('#A855F7')" class="h-8 w-8 rounded-full bg-purple-500 border-2 border-transparent hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-offset-gray-800 transition duration-150"></button>
                            <button aria-label="Pink" onclick="setColor('#EC4899')" class="h-8 w-8 rounded-full bg-pink-500 border-2 border-transparent hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 dark:focus:ring-offset-gray-800 transition duration-150"></button>
                            <button aria-label="Red" onclick="setColor('#EF4444')" class="h-8 w-8 rounded-full bg-red-500 border-2 border-transparent hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-gray-800 transition duration-150"></button>
                            <button aria-label="Orange" onclick="setColor('#F97316')" class="h-8 w-8 rounded-full bg-orange-500 border-2 border-transparent hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 dark:focus:ring-offset-gray-800 transition duration-150"></button>
                            <button aria-label="Gray" onclick="setColor('#6B7280')" class="h-8 w-8 rounded-full bg-gray-500 border-2 border-transparent hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 dark:focus:ring-offset-gray-800 transition duration-150"></button>
                        </div>
                    </div>
                    <div>
                        <label for="stroke-width-slider" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Stroke Width: <span id="stroke-width-value">4</span></label>
                        <input type="range" id="stroke-width-slider" min="1" max="10" value="4" step="1" oninput="setStrokeWidth(this.value)" class="w-full h-2 bg-gray-200 dark:bg-gray-600 rounded-lg appearance-none cursor-pointer accent-indigo-500 dark:accent-indigo-400">
                    </div>
                </div>
            </aside>

            <!-- Display Area -->
            <section class="w-full lg:w-2/3 xl:w-3/4 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center min-h-[450px] md:min-h-[550px] perspective shape-container overflow-hidden">
                <div id="shape-display" class="w-full h-full max-w-lg max-h-lg flex items-center justify-center text-gray-500 dark:text-gray-400">
                    <!-- SVG or Placeholder will be injected here by JavaScript -->
                    <div class="text-center p-10">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-gray-400 dark:text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                        </svg>
                        <p class="text-lg">Select an impossible shape and color using the controls.</p>
                    </div>
                </div>
            </section>

        </main>

        <footer class="text-center mt-12 md:mt-16 py-6 border-t border-gray-300 dark:border-gray-700">
            <p class="text-sm text-gray-500 dark:text-gray-400">Built with HTML, Tailwind CSS, and a touch of JavaScript magic.</p>
        </footer>

    </div>

    <script>
        const shapeDisplay = document.getElementById('shape-display');
        const strokeWidthValueSpan = document.getElementById('stroke-width-value');
        let currentShapeColor = '#6366F1'; // Default color (indigo)
        let currentStrokeWidth = 4;
        let currentShapeType = null;

        // Define SVG data for shapes (More detailed examples)
        // Note: Creating perfect impossible shapes in SVG is complex. These are stylized representations.
        const shapes = {
            penrose_triangle: (color, strokeWidth) => `
                <svg viewBox="-10 -15 120 130" xmlns="http://www.w3.org/2000/svg" class="w-full h-full shape-svg">
                    <g stroke-linecap="round" stroke-linejoin="round" fill="none" stroke="${color}" stroke-width="${strokeWidth}">
                        <path class="shape-part" d="M 50,0 L 100,86.6 L 0,86.6 Z" />
                        <path class="shape-part" d="M 50,15 L 85,72.1 L 15,72.1 Z" stroke-width="${strokeWidth * 0.6}" opacity="0.8" />
                        <!-- Illusion lines -->
                        <path class="shape-part" d="M 50,0 L 50,43.3" stroke-dasharray="${strokeWidth*1.5},${strokeWidth}" opacity="0.6" />
                        <path class="shape-part" d="M 100,86.6 L 25,43.3" stroke-dasharray="${strokeWidth*1.5},${strokeWidth}" opacity="0.6" />
                        <path class="shape-part" d="M 0,86.6 L 75,43.3" stroke-dasharray="${strokeWidth*1.5},${strokeWidth}" opacity="0.6" />
                    </g>
                    <text x="50" y="105" font-family="sans-serif" font-size="10" text-anchor="middle" fill="${color}" class="shape-part">Penrose Triangle</text>
                </svg>
            `,
            penrose_stairs: (color, strokeWidth) => `
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="w-full h-full shape-svg">
                    <g transform="translate(50 50) rotate(10)" stroke-linejoin="round" stroke-linecap="round" fill="${color}" stroke="#374151" stroke-width="${strokeWidth * 0.3}">
                        <!-- Stairs segments -->
                        <path class="shape-part" d="M -30 -40 L 30 -40 L 30 -25 L 45 -25 L 45 25 L 30 25 L 30 40 L -30 40 L -30 25 L -45 25 L -45 -25 L -30 -25 Z" />
                        <!-- Illusion connectors (adjust paths carefully) -->
                        <line class="shape-part" x1="-30" y1="-40" x2="-45" y2="-25" stroke="${color}" stroke-width="${strokeWidth}" fill="none" />
                        <line class="shape-part" x1="30" y1="-40" x2="45" y2="-25" stroke="${color}" stroke-width="${strokeWidth}" fill="none" />
                        <line class="shape-part" x1="30" y1="40" x2="45" y2="25" stroke="${color}" stroke-width="${strokeWidth}" fill="none" />
                        <line class="shape-part" x1="-30" y1="40" x2="-45" y2="25" stroke="${color}" stroke-width="${strokeWidth}" fill="none" />
                    </g>
                     <text x="50" y="95" font-family="sans-serif" font-size="8" text-anchor="middle" fill="${color}" class="shape-part">Penrose Stairs</text>
                </svg>
            `,
             necker_cube: (color, strokeWidth) => `
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="w-full h-full shape-svg">
                    <g fill="none" stroke="${color}" stroke-width="${strokeWidth}" stroke-linecap="round" stroke-linejoin="round">
                        <!-- Back square -->
                        <rect class="shape-part" x="20" y="20" width="40" height="40" />
                        <!-- Front square -->
                        <rect class="shape-part" x="40" y="40" width="40" height="40" />
                        <!-- Connecting lines -->
                        <line class="shape-part" x1="20" y1="20" x2="40" y2="40" />
                        <line class="shape-part" x1="60" y1="20" x2="80" y2="40" />
                        <line class="shape-part" x1="20" y1="60" x2="40" y2="80" />
                        <line class="shape-part" x1="60" y1="60" x2="80" y2="80" />
                    </g>
                    <text x="50" y="95" font-family="sans-serif" font-size="8" text-anchor="middle" fill="${color}" class="shape-part">Necker Cube</text>
                </svg>
            `,
            impossible_cuboid: (color, strokeWidth) => `
                 <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="w-full h-full shape-svg">
                    <g fill="none" stroke="${color}" stroke-width="${strokeWidth}" stroke-linecap="round" stroke-linejoin="round">
                        <!-- Main frame -->
                        <path class="shape-part" d="M 10 30 L 10 70 L 50 90 L 90 70 L 90 30 L 50 10 Z" />
                        <!-- Inner structure -->
                        <line class="shape-part" x1="10" y1="30" x2="50" y2="50" />
                        <line class="shape-part" x1="10" y1="70" x2="50" y2="50" />
                        <line class="shape-part" x1="50" y1="90" x2="50" y2="50" />
                        <!-- Conflicting perspective -->
                        <line class="shape-part" x1="90" y1="30" x2="50" y2="50" />
                        <line class="shape-part" x1="90" y1="70" x2="50" y2="50" />
                        <line class="shape-part" x1="50" y1="10" x2="50" y2="50" />
                         <!-- Central crossing point - subtle visual cue -->
                         <circle cx="50" cy="50" r="${strokeWidth * 0.5}" fill="${color}" stroke="none" />
                    </g>
                    <text x="50" y="98" font-family="sans-serif" font-size="8" text-anchor="middle" fill="${color}" class="shape-part">Impossible Cuboid</text>
                </svg>
            `,
            clear: () => `
                <div class="text-center p-10 opacity-75">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-gray-400 dark:text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                    </svg>
                    <p class="text-lg">Display cleared. Select a shape.</p>
                </div>
            `
        };

        function renderShape() {
            if (!currentShapeType || !shapes[currentShapeType]) {
                 shapeDisplay.innerHTML = shapes['clear'](); // Show cleared message
                 return;
            }

            // Generate SVG string using the function for the current shape
            const svgString = shapes[currentShapeType](currentShapeColor, currentStrokeWidth);
            shapeDisplay.innerHTML = svgString;

             // Optional: Post-render adjustments if needed, though ideally handled by the generator function
             // const svgElement = shapeDisplay.querySelector('.shape-svg');
             // if (svgElement) { ... }
        }

        function selectShape(shapeType) {
            currentShapeType = shapeType;

            // Update button active states
            document.querySelectorAll('.control-button').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-offset-2', 'ring-blue-500', 'dark:ring-offset-gray-800', 'opacity-50');
                btn.classList.add('hover:opacity-100');
                if(btn.id === `btn-${shapeType}`) {
                    btn.classList.add('ring-2', 'ring-offset-2', 'ring-blue-500', 'dark:ring-offset-gray-800');
                } else if (shapeType !== 'clear' && btn.id !== 'btn-clear') {
                     // Optionally dim non-selected shape buttons
                     // btn.classList.add('opacity-50', 'hover:opacity-100');
                }
            });

            renderShape();
        }

        function setColor(color) {
            currentShapeColor = color;
            // Update active color button state (optional)
             document.querySelectorAll('aside button[aria-label]').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-offset-2', 'ring-gray-900', 'dark:ring-gray-100', 'dark:ring-offset-gray-800');
                if (btn.onclick.toString().includes(`'${color}'`)) {
                    btn.classList.add('ring-2', 'ring-offset-2', 'ring-gray-900', 'dark:ring-gray-100', 'dark:ring-offset-gray-800');
                }
            });
            renderShape(); // Re-render the current shape with the new color
        }

        function setStrokeWidth(value) {
            currentStrokeWidth = parseInt(value, 10);
            strokeWidthValueSpan.textContent = currentStrokeWidth;
            renderShape(); // Re-render with new stroke width
        }

        // Initial setup
        document.addEventListener('DOMContentLoaded', () => {
            // Set initial active color button state
            setColor(currentShapeColor);
            // Select a default shape on load
            selectShape('penrose_triangle');
        });

    </script>

</body>
</html>