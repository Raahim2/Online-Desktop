<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Tailwind CSS Weaving Loom</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Minimal style for grid cell aspect ratio */
        .loom-cell {
            aspect-ratio: 1 / 1; /* Make cells square */
            transition: background-color 0.2s ease-in-out; /* Smooth color transition */
            background-clip: content-box; /* Optional: makes padding visible around color */
            /* padding: 1px; */ /* Optional: creates tiny gaps */
        }
        /* Add a subtle pattern to the body */
        body {
             background-color: #f3f4f6; /* bg-gray-100 */
             /* Optional subtle texture */
             /* background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d1d5db' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M5 0h1L0 6V5zM6 5v1H5z'/%3E%3C/g%3E%3C/svg%3E"); */
        }
        /* Style for the output preview */
        #output-preview {
            background-size: 20px 20px; /* Control the size of the repeating pattern */
        }
    </style>
</head>
<body class="bg-gray-100 font-sans antialiased">

    <!-- Header -->
    <header class="bg-gradient-to-r from-teal-600 to-cyan-700 text-white shadow-md sticky top-0 z-10">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-5">
            <h1 class="text-2xl sm:text-3xl font-bold tracking-tight">Tailwind CSS Weaving Loom</h1>
            <p class="text-sm sm:text-base text-teal-100">Visually generate patterns by weaving with Tailwind colors.</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <div class="flex flex-col lg:flex-row gap-8">

            <!-- Controls Section -->
            <aside class="lg:w-1/3 xl:w-1/4 bg-white p-5 sm:p-6 rounded-lg shadow-lg border border-gray-200 self-start">
                <h2 class="text-xl sm:text-2xl font-semibold mb-6 border-b border-gray-300 pb-3 text-gray-800">Loom Controls</h2>

                <!-- Warp Color Selection -->
                <div class="mb-6">
                    <h3 class="text-lg font-medium mb-3 text-gray-700">Warp Color (Vertical)</h3>
                    <div id="warp-color-selector" class="grid grid-cols-5 gap-2">
                        <button onclick="selectWarpColor('bg-gray-200', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-gray-200 rounded"></span></button>
                        <button onclick="selectWarpColor('bg-red-200', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-red-200 rounded"></span></button>
                        <button onclick="selectWarpColor('bg-sky-200', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-sky-200 rounded"></span></button>
                        <button onclick="selectWarpColor('bg-lime-200', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-lime-200 rounded"></span></button>
                        <button onclick="selectWarpColor('bg-fuchsia-200', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-fuchsia-200 rounded"></span></button>
                        <button onclick="selectWarpColor('bg-amber-200', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-amber-200 rounded"></span></button>
                        <button onclick="selectWarpColor('bg-white', this)" class="w-full pt-[100%] relative rounded border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-white rounded"></span></button>
                    </div>
                    <p class="text-sm text-gray-500 mt-2">Selected: <span id="selected-warp-color-indicator" class="inline-block w-4 h-4 rounded align-middle border border-gray-300 bg-gray-200"></span> <code id="selected-warp-color-name" class="text-xs">bg-gray-200</code></p>
                </div>

                <!-- Weft Color Selection -->
                <div class="mb-6">
                    <h3 class="text-lg font-medium mb-3 text-gray-700">Weft Color (Horizontal)</h3>
                    <div id="weft-color-selector" class="grid grid-cols-5 gap-2">
                         <button onclick="selectWeftColor('bg-gray-800', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-gray-800 rounded"></span></button>
                         <button onclick="selectWeftColor('bg-red-700', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-red-700 rounded"></span></button>
                         <button onclick="selectWeftColor('bg-sky-700', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-sky-700 rounded"></span></button>
                         <button onclick="selectWeftColor('bg-lime-700', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-lime-700 rounded"></span></button>
                         <button onclick="selectWeftColor('bg-fuchsia-700', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-fuchsia-700 rounded"></span></button>
                         <button onclick="selectWeftColor('bg-amber-700', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-amber-700 rounded"></span></button>
                         <button onclick="selectWeftColor('bg-black', this)" class="w-full pt-[100%] relative rounded border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"><span class="absolute inset-0 bg-black rounded"></span></button>
                    </div>
                     <p class="text-sm text-gray-500 mt-2">Selected: <span id="selected-weft-color-indicator" class="inline-block w-4 h-4 rounded align-middle border border-gray-300 bg-gray-800"></span> <code id="selected-weft-color-name" class="text-xs">bg-gray-800</code></p>
                </div>

                 <!-- Pattern Type -->
                <div class="mb-6">
                    <label for="pattern-type" class="block text-lg font-medium mb-2 text-gray-700">Weave Pattern</label>
                    <select id="pattern-type" class="block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white">
                        <option value="plain">Plain Weave (1x1)</option>
                        <option value="twill">Twill Weave (2x1 Diagonal)</option>
                        <option value="basket">Basket Weave (2x2)</option>
                        <option value="checkerboard">Checkerboard</option>
                        <option value="vert-stripe">Vertical Stripes</option>
                        <option value="horiz-stripe">Horizontal Stripes</option>
                    </select>
                </div>

                <!-- Grid Size -->
                <div class="mb-6">
                     <label for="grid-size" class="block text-lg font-medium mb-2 text-gray-700">Loom Size</label>
                     <div class="flex items-center gap-2">
                         <input type="range" id="grid-size" value="10" min="4" max="24" step="2" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 accent-indigo-600">
                         <span id="grid-size-display" class="text-sm font-medium text-gray-600 bg-gray-100 px-2 py-0.5 rounded">10x10</span>
                     </div>
                     <p class="text-xs text-gray-400 mt-1">(Adjust size and re-weave)</p>
                </div>


                <!-- Action Button -->
                <button onclick="weavePattern()" class="w-full bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white font-bold py-2.5 px-4 rounded-md transition duration-150 ease-in-out shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1 -mt-0.5" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" />
                    </svg>
                    Weave Pattern
                </button>

            </aside>

            <!-- Loom Display & Output Section -->
            <section class="lg:w-2/3 xl:w-3/4">
                <div class="bg-white p-5 sm:p-6 rounded-lg shadow-lg border border-gray-200 mb-8 relative overflow-hidden">
                    <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-800">Loom Preview</h2>
                    <div class="absolute top-2 right-2 bg-gray-100 text-gray-500 text-xs px-2 py-1 rounded z-10">Live Preview</div>
                    <div id="loom-display-container" class="bg-gray-100 p-2 inline-block border border-gray-300 rounded shadow-inner max-w-full overflow-hidden">
                         <div id="loom-display" class="grid gap-0">
                            <!-- Grid cells will be generated here by JavaScript -->
                        </div>
                    </div>
                    <p class="text-sm text-gray-500 mt-4">Adjust controls and click "Weave Pattern" to see the result.</p>
                </div>

                <div class="bg-white p-5 sm:p-6 rounded-lg shadow-lg border border-gray-200">
                     <h2 class="text-xl sm:text-2xl font-semibold mb-4 text-gray-800">Generated Pattern Output</h2>
                     <p class="text-gray-600 mb-4 text-sm sm:text-base">Use this pattern as a repeating background. Right-click the preview to save or inspect the background style.</p>
                     <div class="flex flex-col md:flex-row gap-6 items-start">
                         <!-- Visual Preview -->
                         <div class="flex-shrink-0">
                             <h3 class="text-lg font-medium mb-2 text-gray-700">Repeating Preview</h3>
                             <div id="output-preview" class="w-48 h-48 border border-gray-300 shadow-md rounded bg-gray-50">
                                 <!-- Background will be set by JS -->
                             </div>
                         </div>
                         <!-- Code Output (Conceptual) -->
                         <div class="flex-grow min-w-0"> <!-- Added min-w-0 for flex shrink/wrap -->
                            <h3 class="text-lg font-medium mb-2 text-gray-700">Pattern Details</h3>
                            <p class="text-sm text-gray-500 mb-3">This pattern uses the following Tailwind classes:</p>
                            <div class="space-y-2">
                                <div>
                                    <span class="text-sm font-medium text-gray-600">Warp:</span>
                                    <code id="output-warp-class" class="text-sm text-indigo-700 bg-indigo-50 px-1.5 py-0.5 rounded">bg-gray-200</code>
                                </div>
                                <div>
                                    <span class="text-sm font-medium text-gray-600">Weft:</span>
                                    <code id="output-weft-class" class="text-sm text-teal-700 bg-teal-50 px-1.5 py-0.5 rounded">bg-gray-800</code>
                                </div>
                                <div>
                                    <span class="text-sm font-medium text-gray-600">Pattern:</span>
                                    <span id="output-pattern-name" class="text-sm text-gray-700 capitalize">Plain</span>
                                </div>
                                 <div>
                                    <span class="text-sm font-medium text-gray-600">Size:</span>
                                    <span id="output-pattern-size" class="text-sm text-gray-700">10x10</span>
                                </div>
                            </div>
                            <h4 class="text-md font-medium mt-4 mb-2 text-gray-700">CSS Background (Example)</h4>
                            <pre class="bg-gray-800 text-gray-200 p-3 rounded border border-gray-700 overflow-x-auto text-xs sm:text-sm"><code id="output-css">/* Click "Weave Pattern" to generate CSS */</code></pre>
                         </div>
                     </div>
                 </div>

            </section>

        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-400 mt-16 border-t border-gray-700">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-6 text-center">
            <p class="text-sm">&copy; 2023 Interactive Tailwind Loom. A concept project for UI demonstration.</p>
            <p class="text-xs mt-1">Built purely with HTML & Tailwind CSS CDN (+ minimal JS). Not affiliated with Tailwind Labs.</p>
        </div>
    </footer>

    <!-- Minimal JavaScript for Interactivity -->
    <script>
        let warpColor = 'bg-gray-200'; // Default warp color class
        let weftColor = 'bg-gray-800'; // Default weft color class
        let currentPattern = 'plain'; // Default pattern
        let gridSize = 10; // Default grid size

        // DOM Elements
        const loomDisplay = document.getElementById('loom-display');
        const outputPreview = document.getElementById('output-preview');
        const outputCssCode = document.getElementById('output-css');
        const gridSizeInput = document.getElementById('grid-size');
        const gridSizeDisplay = document.getElementById('grid-size-display');
        const patternSelector = document.getElementById('pattern-type');
        const warpIndicator = document.getElementById('selected-warp-color-indicator');
        const warpName = document.getElementById('selected-warp-color-name');
        const weftIndicator = document.getElementById('selected-weft-color-indicator');
        const weftName = document.getElementById('selected-weft-color-name');
        const outputWarpClass = document.getElementById('output-warp-class');
        const outputWeftClass = document.getElementById('output-weft-class');
        const outputPatternName = document.getElementById('output-pattern-name');
        const outputPatternSize = document.getElementById('output-pattern-size');

        // Tailwind Color to Hex/RGB mapping (add more as needed)
        const colorMap = {
            'bg-gray-200': '#e5e7eb', 'bg-gray-800': '#1f2937',
            'bg-red-200': '#fecaca', 'bg-red-700': '#b91c1c',
            'bg-sky-200': '#bae6fd', 'bg-sky-700': '#0369a1',
            'bg-lime-200': '#d9f99d', 'bg-lime-700': '#4d7c0f',
            'bg-fuchsia-200': '#f5d0fe', 'bg-fuchsia-700': '#a21caf',
            'bg-amber-200': '#fde68a', 'bg-amber-700': '#b45309',
            'bg-white': '#ffffff', 'bg-black': '#000000',
        };

        function resolveTailwindColor(className) {
            return colorMap[className] || '#ffffff'; // Default to white
        }

        // Update grid size display and variable when input changes
        gridSizeInput.addEventListener('input', (event) => { // Use 'input' for live update
            gridSize = parseInt(event.target.value, 10);
            gridSizeDisplay.textContent = `${gridSize}x${gridSize}`;
            // No auto-weave on slider change for performance, wait for button
        });

         // Update pattern variable when selection changes
         patternSelector.addEventListener('change', (event) => {
             currentPattern = event.target.value;
             // No auto-weave on select change, wait for button
         });

        function highlightSelectedButton(selector, selectedButton) {
             document.querySelectorAll(selector).forEach(btn => {
                btn.classList.remove('ring-2', 'ring-offset-2', 'ring-indigo-500');
                btn.classList.add('border-transparent');
             });
             if (selectedButton) {
                selectedButton.classList.remove('border-transparent');
                selectedButton.classList.add('ring-2', 'ring-offset-2', 'ring-indigo-500');
             }
        }

        function selectWarpColor(colorClass, buttonElement) {
            warpColor = colorClass;
            warpIndicator.className = `inline-block w-4 h-4 rounded align-middle border border-gray-300 ${colorClass}`;
            warpName.textContent = colorClass;
            highlightSelectedButton('#warp-color-selector button', buttonElement);
        }

        function selectWeftColor(colorClass, buttonElement) {
            weftColor = colorClass;
            weftIndicator.className = `inline-block w-4 h-4 rounded align-middle border border-gray-300 ${colorClass}`;
            weftName.textContent = colorClass;
            highlightSelectedButton('#weft-color-selector button', buttonElement);
        }

        function weavePattern() {
            loomDisplay.innerHTML = ''; // Clear previous grid
            loomDisplay.style.gridTemplateColumns = `repeat(${gridSize}, minmax(0, 1fr))`;
            // loomDisplay.style.gridTemplateRows = `repeat(${gridSize}, minmax(0, 1fr))`; // Handled by aspect-ratio

            const fragment = document.createDocumentFragment(); // Improve performance

            for (let row = 0; row < gridSize; row++) {
                for (let col = 0; col < gridSize; col++) {
                    const cell = document.createElement('div');
                    // Base classes - ensure width/height fill and aspect ratio works
                    cell.className = 'loom-cell';

                    let cellColor = warpColor; // Default to warp

                    // Determine color based on pattern type
                    switch (currentPattern) {
                        case 'plain':
                            if ((row + col) % 2 !== 0) cellColor = weftColor;
                            break;
                        case 'twill': // 2x1 Twill (offset diagonal)
                            if ((row + col * 2) % 3 !== 0) cellColor = weftColor;
                            break;
                        case 'basket': // 2x2 Basket Weave
                            const blockRow = Math.floor(row / 2);
                            const blockCol = Math.floor(col / 2);
                            if ((blockRow + blockCol) % 2 === 0) { // Even blocks (row+col is even)
                                cellColor = (col % 2 === 0) ? warpColor : weftColor; // Vertical strips
                            } else { // Odd blocks
                                cellColor = (row % 2 === 0) ? weftColor : warpColor; // Horizontal strips
                            }
                            break;
                        case 'checkerboard':
                            if ((Math.floor(row / 1) + Math.floor(col / 1)) % 2 !== 0) cellColor = weftColor; // 1x1 checker
                            break;
                        case 'vert-stripe':
                             if (col % 2 !== 0) cellColor = weftColor;
                             break;
                        case 'horiz-stripe':
                             if (row % 2 !== 0) cellColor = weftColor;
                             break;
                        default:
                            if ((row + col) % 2 !== 0) cellColor = weftColor; // Fallback to plain
                    }

                    cell.classList.add(cellColor);
                    fragment.appendChild(cell);
                }
            }
            loomDisplay.appendChild(fragment); // Append all cells at once

            updateOutput();
        }

        function updateOutput() {
            // Update details section
            outputWarpClass.textContent = warpColor;
            outputWarpClass.className = `text-sm ${warpColor.replace('bg-', 'text-').replace('-200', '-700').replace('-800', '-200')} ${warpColor.replace('bg-', 'bg-').replace('-200','-50').replace('-800','-900')} px-1.5 py-0.5 rounded`; // Dynamic text/bg color
            outputWeftClass.textContent = weftColor;
             outputWeftClass.className = `text-sm ${weftColor.replace('bg-', 'text-').replace('-700', '-100').replace('-800','-200')} ${weftColor.replace('bg-', 'bg-').replace('-700','-100').replace('-800','-900')} px-1.5 py-0.5 rounded`; // Dynamic text/bg color
            outputPatternName.textContent = patternSelector.options[patternSelector.selectedIndex].text.split(' (')[0]; // Get clean name
            outputPatternSize.textContent = `${gridSize}x${gridSize}`;

            // Update Output Preview using repeating gradient
            const warpHex = resolveTailwindColor(warpColor);
            const weftHex = resolveTailwindColor(weftColor);
            const previewSize = 20; // Size of repeating unit in px

            // Generate a simple repeating background based on the first 2x2 cells for most patterns
            let c00 = warpHex, c01 = weftHex, c10 = weftHex, c11 = warpHex; // Default: plain weave

            switch (currentPattern) {
                 case 'plain': // Already set
                    break;
                 case 'twill': // More complex, approximate with diagonal
                    c01 = warpHex; c10 = warpHex; c11 = weftHex; // Simple diagonal approx
                    break;
                 case 'basket': // 2x2 blocks
                    c01 = weftHex; c10 = warpHex; c11 = warpHex;
                    break;
                 case 'checkerboard': // Already set
                    break;
                 case 'vert-stripe':
                     c01 = weftHex; c10 = warpHex; c11 = weftHex;
                     break;
                 case 'horiz-stripe':
                     c01 = warpHex; c10 = weftHex; c11 = weftHex;
                     break;
            }

            // Use repeating-conic-gradient for better checkerboard/simple patterns
             const cssBackground = `repeating-conic-gradient(
                ${c00} 0% 25%, ${c01} 25% 50%,
                ${c11} 50% 75%, ${c10} 75% 100%
            )`;

            outputPreview.style.background = cssBackground;
            outputPreview.style.backgroundSize = `${previewSize}px ${previewSize}px`; // Control pattern scale

            // Update CSS Code Output
            outputCssCode.textContent = `background: ${cssBackground};\nbackground-size: ${previewSize}px ${previewSize}px; /* Adjust size as needed */`;
        }

        // Initial setup on load
        document.addEventListener('DOMContentLoaded', () => {
            // Set initial selected colors visually using the buttons
            highlightSelectedButton('#warp-color-selector button', document.querySelector(`#warp-color-selector button[onclick*="'${warpColor}'"]`));
            highlightSelectedButton('#weft-color-selector button', document.querySelector(`#weft-color-selector button[onclick*="'${weftColor}'"]`));
            // Update text indicators
            selectWarpColor(warpColor, document.querySelector(`#warp-color-selector button[onclick*="'${warpColor}'"]`));
            selectWeftColor(weftColor, document.querySelector(`#weft-color-selector button[onclick*="'${weftColor}'"]`));
             // Set initial grid size display
            gridSizeDisplay.textContent = `${gridSize}x${gridSize}`;
            // Generate initial pattern
            weavePattern();
        });

    </script>

</body>
</html>